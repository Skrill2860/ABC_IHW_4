# Индивидуальное домашнее задание №4, вариант 12.
## Порошин Илья БПИ219
Доброго времени суток!\
В этом докУменте я написал как оно запускалось, может у вас тоже запустится, если пойдете тем же путем.\
Если нет - я не виноват.\
Наверное.\
А, ну и если все комманды повторять, то комментариев, очевидно, не будет, так как они перепишутся заново сгенерированными файлами.\
Так что не надо повторять XD\
У блоков есть ссылочки на папки, на них можно кликать. Еще есть тесты в папках **Tests**.
> Ссылочки работают в VSCode, возможно в Atom тоже, но я не проверял.

*Работа сделана на 8.*\

> Задание варианта 12:\
Задача о гостинице - 1. В гостинице 30 номеров, клиенты гостиницы снимают номер на одни или несколько суток. Если в гостинице нет свободных номеров, клиенты не уходят, а устраиваются на рядом с гостиницей на скамейках и ждут, пока любой номеров не освободится. Создать многопоточное приложение, моделирующее работу гостиницы.

## Модель параллельных вычислений
Клиенты и сервер. Клиенты - клиенты, сервер - гостиница.\
Клиенты ждут оповещений от сервера, чтобы далее взаимодействовать с ним или для своих нужд (говорят что прожили н дней).\
Запросы клиентов - запросы на бронирование и выселение из номера.\

## Описание предметной области
В небольшом городке есть гостиница, в которой **30 номеров**.\
Клиенты приезжают в гостиницу, чтобы снять номер. Номер они снимают **максимум на неделю**, так как в городке делать особо нечего и одной недели всем более чем хватает.\
Еще гостиница является самой большой достопримечательностью города, а заранее номер заказать нельзя, так что снимать номер нужно на месте.\
Потому, если места в гостинице нет, то им приходится **ждать на лавочках, пока освободится номер**.\
Когда клиент уезжает и номер освобождается, отель **сразу оповещает об этом клиентов**, чтобы им не пришлось ждать слишком долго, а клиенты **сразу же бегут в гостиницу**, чтобы забронировать номер. Тут действует правило кто успел тот и съел (ну или игра в музыкальные стульчики).\
Когда отель закрывается, то все клиенты, которые сейчас в гостинице, остаются в ней в ожидании наступления следующего дня, который наступит неизвестно когда (**это оптимистичный прогноз**).

## Описание программы, обобщенный алгоритм
Отель - класс поток. Он хранит в себе количество свободных номеров и отвечает за подсчет дней, чтобы у всех клиентов был одинаковый счет времени. Как поток у него алгоритм такой: объявить что день начался, подождать пока все сделают то что хотят (**клиенты заселяются**), затем объявить, что день кончился (**новые клиенты приезжают**)\
Клиент - класс поток. Он хранит в себе свой идентификационный номер (**типа имя**), и счетчик дней, которые он провел в гостинице. Как поток у него алгоритм такой: подождать пока отель объявит, что есть комнаты, затем попытаться заселиться в номер, если не получилось, то снова ждать пока освободится номер. Если получилось, то ждать пока отель объявит, что начался новый день, затем увеличить счетчик дней на 1, и если он не достиг максимального значения, то снова ждать пока отель объявит, что начался новый день. Если счетчик достиг максимального значения, то выселиться из номера.\
Генератор - класс поток. Каждый день генерирует новых клиентов (их количество ограничено, чтоб слишком много не плодить потоков). Как поток у него алгоритм такой: ждать пока отель объявит, что день закончился, затем сгенерировать новых клиентов, и снова ждать пока отель объявит, что день закончился.

## Как пользоваться:
```
$ g++ hotel_simulation.cpp -lpthread -o hotel

# default settings
$ ./hotel

# console input
$ ./hotel c

# terminal args settings <max_clients_per_day> <max_clients_count> <number_of_days>
$ ./hotel t 10 100 5

# file args settings <input_file> <output_file>
$ ./hotel f input.txt output.txt
```


# Спасибо за проверку!